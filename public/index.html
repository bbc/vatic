<!DOCTYPE html5>
<html>
<head>

<title>vatic</title>

<link rel="stylesheet" type="text/css" href="pybossa.min.css">

<script src="jquery.js"></script>
<script src="pybossa.js"></script>
</head>
<body>
<div class="container" id="container">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
<style>
html { overflow: hidden; }
#attributes
{
  background-color: #ffffff;
  border-top: 4px solid #000000;
  bottom: 0;
  left: 0;
  height: 180px;
  overflow: auto;
  padding-bottom: 2em;
  position: fixed;
  white-space: nowrap;
  width: 100%;
  z-index: 2;
  float:left;
  display: block
}

.face-label {
  display: inline-block;
  text-align: center;
  font-size: xx-small;
  padding: 1em;
  border-style: solid;
  border-width: thick;
  border-color: white;
}
.face-label img {
  height: 160px;
}

.attribute-selected {
  border-color: yellow;
}
#videoframe
{
    background-color : #000;
    display : block;
    height: 500px;
}

#videoframe * {
  box-sizing: content-box;
}

#sidebar {
    height: 500px;
    display: block;
    overflow: auto;
}

.trackobject
{
    border : 2px solid black;
    font-family : Arial;
    font-size : 14px;
}
#bottombar {
  display: block;
  width: 100%;
  height: 2000px;
}
.trackobjectfoldedup
{
}

.trackobjectfoldeddown
{
}

.trackobject p, .trackobject li, .trackobject label
{
    font-family : Arial;
    font-size : 14px !important;
}

.trackobject .label:hover
{
    font-weight : bold;
}

.trackobject p
{
    padding : 2px;
    margin : 0;
}

.trackobject ul, ol
{
    margin : 0;
    padding : 0;
    margin-left : 30px;
}

.trackobjectheader
{
    margin : 0;
    padding : 3px !important;
    /*cursor : pointer;*/
}

.trackobjectheader:hover
{
    /*text-decoration : underline;*/
}

.trackobjectheader .ui-icon
{
    float : left;
}

.boundingbox
{
    position : absolute !important;
    border-style : solid;
    border-width : 2px;
    z-index : 5;
}

.boundingbox .boundingboxtext
{
    font-size : 14px;
    /*margin-top : -18px;*/
    color : #fff;

    position : absolute;
    margin-left : -80px;
    margin-top : -2px;
    width : 75px;
    text-align : right;

    padding : 1px;
    padding-right : 3px;
    cursor : default;
    z-index : 0;

    text-shadow: -1px 0 2px #000, 0px 1px 2px #000, 1px 0 2px #000, 0 -1px 2px #000; 
    -moz-text-shadow: -1px 0 2px #000, 0px 1px 2px #000, 1px 0 2px #000, 0 -1px 2px #000; 
    -webkit-text-shadow: -1px 0 2px #000, 0px 1px 2px #000, 1px 0 2px #000, 0 -1px 2px #000; 
}

.boundingboxhighlight .boundingboxtext
{
    text-shadow: -1px 0 5px #000, 0px 1px 5px #000, 1px 0 5px #000, 0 -1px 5px #000; 
    -moz-text-shadow: -1px 0 5px #000, 0px 1px 5px #000, 1px 0 5px #000, 0 -1px 5px #000; 
    -webkit-text-shadow: -1px 0 5px #000, 0px 1px 5px #000, 1px 0 5px #000, 0 -1px 5px #000; 
    z-index : 1;
}

.boundingbox .fill
{
    width : 100%;
    height : 100%;
    display : block;
    display : none;
}

.boundingboxhighlight
{
    z-index : 10;
}

.boundingboxhighlight .fill
{
    opacity : 0.25;
    display : block;
}

.boundingboxoccluded
{
    border-style : dashed;
}

.ui-selected {
  border-style: dotted;
}

.ui-resizable-disabled
{
    opacity : 1.0 !important;
}

.boundingboxdim
{
    opacity : 0.3 !important; 
}

.boundingboxlocked
{
    z-index : 0;
    opacity : 0.3 !important;
}

.boundingboxhighlight
{
    opacity : 1 !important;
}

.boxtooltip
{
    position : absolute;
    width : 200px;
    height : 200px;
    z-index : 100;
    border : 5px solid #000;
    background-color : #000;
    background-repeat : no-repeat;
    -moz-box-shadow: 2px 2px 10px #000, -2px 2px 10px #000, 2px -2px 10px #000, -2px -2px 10px #000;
    -webkit-box-shadow: 2px 2px 10px #000, -2px 2px 10px #000, 2px -2px 10px #000, -2px -2px 10px #000;
    box-shadow: 2px 2px 10px #000, -2px 2px 10px #000, 2px -2px 10px #000, -2px -2px 10px #000;
}

.boxtooltip .boundingbox
{
    position : relative;
    z-index : 101;
}
</style>
  <div style="height: 75px; width:100%; position: fixed; top: 0; left: 0; z-index:1050">
    <div id="loading" class="alert alert-info" style="display:none;">
      <a class="close" onclick='$("#loading").hide()'>&times;</a>
      <div id='loadingscreentext'>Downloading the video...</div>
        <div class="progress" id='loadingscreenslider'>
          <div class="progress-bar progress-bar-striped active"></div>
        </div>
      </div>
    </div>
  </div>
  <div id='annotatescreen'>
    <table>
      <tr>
        <td>
          <div id='videoframe'></div>      
        </td>
        <td>
	        <div class="" id='sidebar'>
            <div id='objectcontainer'></div>
          </div>
        </td>
      </tr>
    </table> 
    <div class="row">
      <div class="col-md-12" id='bottombar'>
        <div class="progress" id='playerslider'>
         <div class="progress-bar progress-bar-striped active"></div>
        </div>
        <button class='btn' id='rewindstartbutton' disabled title="rewind to
          start"><span class="glyphicon glyphicon-fast-backward" aria-hidden="true"></span></button>
        <button class='btn' id='rewindbutton' disabled title="rewind / ←"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></button>
        <button class='btn' id='playbutton' title="play / →"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></button>
        <button class='btn' id='newobjectbutton' title="new object / ."><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>
        <button class='btn' id='occludeobjectbutton' title="toggle occluded" disabled><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></button>
        <button class='btn' id='hideobjectbutton' title="toggle offscreen" disabled><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
        <button class='btn' id='deleteobjectbutton' title="delete / Del" disabled><span
            class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>
        <button id='submitbutton' class='btn'>Submit</button>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
	      <button class='btn' id='openadvancedoptions'>Options</button>
        <div id='advancedoptions' style="display:none">
          <button class='btn' id='closeadvancedoptions'>Hide Options</button>
          <label for='annotateoptionsresize'>
            <input type='checkbox' id='annotateoptionsresize'>
              Disable Resize?
	          </label>
            <label for='annotateoptionshideboxes'>
              <input type='checkbox' id='annotateoptionshideboxes'>
                Hide Boxes?
	            </label>
              <label for='annotateoptionshideboxtext'>
                <input type='checkbox' id='annotateoptionshideboxtext'>
                  Hide Labels?
	            </label>
              <div id='speedcontrol'>
                <label for='speedcontrolslower'>
                  <input type='radio' name='speedcontrol' value='5,1' id='speedcontrolslower'>
                    Slower
                </label>
                <label for='speedcontrolslow'>
                  <input type='radio' name='speedcontrol' value='15,1' id='speedcontrolslow'>
                  Slow
		            </label>
                <label for='speedcontrolnorm'>
                  <input type='radio' name='speedcontrol' value='30,1' id='speedcontrolnorm' checked='checked'>
                    Normal
		            </label>
                <label for='speedcontrolfast'>
                  <input type='radio' name='speedcontrol' value='90,1' id='speedcontrolfast'>
                  Fast
		            </label>
	            </div>
          </div>
        </div>
      </div>
  </div>
  <div id="success" style="display: none">Task Completed!</div>
</div>
<div id="attributes">

</div>
<div class="hidden" id='preloadpit'></div>
<script src="jquery-ui/js/jquery-ui-1.10.4.custom.min.js"></script>
<script src="videoplayer.js"></script>
<script src="preload.js"></script>
<script src="objectui.js"></script>
<script src="ui.js"></script>
<script src="job.js"></script>
<script src="tracks.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    var deferred = new Object();
    var task = new Object();
    task.id = 100;
    task.info = {
      "jobid":"100",
      "slug":"slug",
      "start":"1",
      "stop":"100",
      "width":"704",
      "height":"576",
      "skip":"25",
      "blowradius":"5", // TODO remove later?
      "labels":"[\"face\"]",
      "attributes":"[[\"Jeremy PAXMAN\", \"David CAMERON\", \"Ed MILLIBAND\"]]"
    }
    var task_data =
      [{label:0,attributes:[],boxes:[[10,10,30,30,1,true,false],[100,100,130,130,26,false,false],[200,200,230,230,51,false,false],[100,100,130,130,76,true,false]]},
      {label:0,attributes:[],boxes:[[20,20,50,50,1,true,false],[200,200,230,230,26,false,false],[400,400,430,430,51,false,false],[200,200,230,230,76,true,false]]}];

    console.log("Booting...");

    job = job_import(task.info, task_data);

    preloadvideo(job.start, job.stop, job.frameurl,
      preloadslider($("#loadingscreenslider"), function(progress) {
        $("#loading-progress").children(".progress-bar").width(progress * 100 + "%");
        if (progress == 1) {
          $("#loadingscreen").hide();
          ui_build(task, deferred, job);
        }
      })
    );
});
</script>
<div id="bottombar"></div>
</body>
</html>
